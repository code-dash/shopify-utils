!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports=function(){return window.location.pathname.match(/\/admin\/products\/\d+/)?"product":window.location.pathname.match(/\/admin\/products$/)?"products":window.location.pathname.match(/\/admin\/collections\/\d+/)?"collection":window.location.pathname.match(/\/admin\/collections$/)?"collections":window.location.pathname.match(/\/admin\/pages\/\d+/)?"page":window.location.pathname.match(/\/admin\/pages$/)?"pages":window.location.pathname.match(/\/admin\/orders\/\d+/)?"order":window.location.pathname.match(/\/admin\/orders$/)?"orders":window.location.pathname.match(/\/admin\/articles/)?"articles":window.location.pathname.match(/\/admin\/blogs\/\d+\/articles\/\d+$/)?"article":window.location.pathname.match(/\/admin\/blogs/)?"blogs":window.location.pathname.match(/\/admin\/blogs\/\d+$/)?"blog":window.location.pathname.match(/\/admin\/menus\/\d+$/)?"navigation":void 0}},function(e,t){e.exports=function(){this.toggle.addEventListener("click",()=>{this.sidebar.classList.toggle(this.activeClass),this.toggle.classList.toggle(this.activeClass),this.sidebar.querySelector(`.${this.prefix}-duplicate-html`).classList.remove(this.activeClass)}),document.addEventListener("keyup",e=>{"27"==e.keyCode&&(this.sidebar.classList.remove(this.activeClass),this.toggle.classList.remove(this.activeClass),this.sidebar.querySelector(`.${this.prefix}-duplicate-html`).classList.remove(this.activeClass))})}},function(e,t){e.exports=function(){return`\n  <style>\n    .${this.prefix}-sidebar {\n      position: fixed;\n      top: 0;\n      right: 0;\n      height: 100vh;\n      z-index: 9999;\n    }\n    \n    .${this.prefix}-toggle {\n      position: absolute;\n      top: 50%;\n      right: 100%;\n      width: 20px;\n      height: 20px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      cursor: pointer;\n    }\n    \n    .${this.prefix}-toggle:after {\n      content: '';\n      display: block;\n      width: 7px;\n      height: 7px;\n      margin: 0 auto;\n      border-bottom: 1px solid #000;\n      border-left: 1px solid #000;\n      transform: rotate(45deg);\n    }\n    \n    .${this.prefix}-toggle.is-active:after {\n      transform: rotate(-135deg);\n    }\n    \n    .${this.prefix}-sidebar__inner {\n      overflow: hidden;\n      background-color: #fff;\n      width: 0;\n      height: 100vh;\n      transition: width 0.5s, padding 0.5s;\n      box-shadow: -2px 0 5px rgba(0,0,0,.1);\n    }\n    \n    .${this.prefix}-sidebar__inner ul {\n      list-style: none;\n      padding: 0;\n      margin: 0;\n    }\n    \n    .${this.prefix}-sidebar__inner li {\n      padding: 0 0 5px;\n      border-bottom: 1px solid #dfe3e8;\n    }\n    \n    .${this.prefix}-sidebar__inner ul a {\n      display: flex;\n      align-items: center;\n      color: #454f5b;\n      white-space: nowrap;\n      text-decoration: none;\n      opacity: 0.7;\n    }\n    \n    .${this.prefix}-sidebar__inner ul a:hover {\n      opacity: 1;\n    } \n    \n    .${this.prefix}-sidebar__inner ul svg {\n      margin-right: 4px;\n    }\n    \n    .${this.prefix}-sidebar__inner ul .icon-duplicate {\n      width: 16px;\n      height: 16px;\n    }\n    \n    .${this.prefix}-sidebar.is-active .${this.prefix}-sidebar__inner {\n      width: 200px;\n      padding: 20px;\n    }\n\n    .${this.prefix}-sidepanel {\n      position: absolute;\n      top: 0;\n      right: 200px;\n      min-width: 300px;\n      padding: 20px;\n      height: auto;\n      z-index: 2;\n      background-color: #fff;\n      transition: transform 0.3s;\n      overflow: hidden;\n      display: flex;\n      align-items: center;\n      transform: translateY(-100%);\n      box-shadow: -5px 2px 5px rgba(0,0,0,.1);\n    }\n\n    .${this.prefix}-sidepanel.is-active {\n      transform: translateY(0);\n    }\n\n    .${this.prefix}-sidepanel form {\n      flex: 100%;\n    }\n\n    .${this.prefix}-sidepanel li {\n      margin: 0 0 5px;\n    }\n\n    .${this.prefix}-sidepanel li label {\n      display: flex;\n      align-items: center;\n    }\n\n    .${this.prefix}-sidepanel li input {\n      margin: 0 10px 0 0;\n    }\n\n    .${this.prefix}-sidepanel__close {\n      position: absolute;\n      top: 10px;\n      right: 20px;\n    }\n\n    .${this.prefix}-sidepanel__close:before,\n    .${this.prefix}-sidepanel__close:after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 50%;\n      display: block;\n      width: 1px;\n      height: 20px;\n      background:#000;\n      cursor: pointer;\n    }\n\n    .${this.prefix}-sidepanel__close:before {\n      transform: rotate(45deg);\n    }\n\n    .${this.prefix}-sidepanel__close:after {\n      transform: rotate(-45deg);\n    }\n\n    .${this.prefix}-sidepanel .btn {\n      width: 100%;\n      padding: 5px 0;\n      background: linear-gradient(180deg,#3f4eae,#3f4eae);\n      border-color: #38469b;\n      box-shadow: inset 0 0 0 0 transparent, 0 1px 0 0 rgba(22,29,37,.05), 0 0 1px 0 #38469b;\n      font-size: 14px;\n      color: #fff;\n      line-height: 1.6rem;\n      text-transform: none;\n      letter-spacing: normal;\n      border-radius: 5px;\n      cursor: pointer;\n    }\n\n    .${this.prefix}-sidepanel .btn:hover {\n      background: linear-gradient(180deg,#5c6ac4,#4959bd);\n      text-decoration: none;\n    }\n  </style>\n  `}},function(e,t){e.exports=function(){let e=window.top.document.querySelector('meta[name="csrf-token"');e?this.csrfToken=e.getAttribute("content"):fetch(window.location.origin+"/admin/articles",{method:"GET",credentials:"include",headers:{accept:"text/html, application/xhtml+xml, application/xml","x-shopify-web":"1"}}).then(e=>{if(e.ok)return e.text();{const e=new Error("Error fetching CSRF token.");throw e.status="ERROR_FETCHING_CSRF_TOKEN",e}}).then(t=>{let n=window.top.document.createElement("div");if(n.innerHTML=t,e=n.querySelector('meta[name="csrf-token"]'),e){{this.csrfToken=e.getAttribute("content");const t=window.top.document.createElement("meta");t.setAttribute("name","csrf-token"),t.setAttribute("content",null),window.top.document.querySelector("head").appendChild(t)}n.remove(),n=null}})}},function(e,t){e.exports=function(){const e=this;this.sidebar.querySelector(".js-shopify_utils-action").addEventListener("click",(function(t){t.preventDefault();const n=this.getAttribute("data-type"),i=e.getCurrentPageType();-1!==["product","products","collection","collections","page","pages","article","articles","blog","blogs","navigation"].indexOf(i)?e[n]():alert("Not Supported for duplication")})),this.sidebar.querySelector(`.${this.prefix}-sidepanel__close`).addEventListener("click",e=>{this.sidebar.querySelectorAll(`.${this.prefix}-sidepanel`).forEach(e=>{e.classList.remove(this.activeClass)})})}},function(e,t){e.exports={duplicateIcon:'<svg viewBox="0 0 20 20" class="icon-duplicate" focusable="false" aria-hidden="true"><path d="M8 12h8V4H8v8zm4 4H4V8h2v5a1 1 0 0 0 1 1h5v2zm5-14H7a1 1 0 0 0-1 1v3H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3h3a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z" fill-rule="evenodd"></path></svg>'}},function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),s=n(1),a=n.n(s),r=n(2),c=n.n(r),l=n(3),d=n.n(l),p=n(4),u=n.n(p),h=n(5);var f=n(7),g=n.n(f),m=n(8),x=n.n(m),b=n(9),y=n.n(b),w=n(10),_=n.n(w),v=n(11),S=n.n(v),$=n(12),k=n.n($);var j=n(14),T=n.n(j),q=n(15),O=n.n(q),E=n(16),P=n.n(E),M=n(17),C=n.n(M),L=n(18),R=n.n(L),A=n(19),H=n.n(A),I=n(20),G=n.n(I),N=n(23),V=n.n(N);class z{constructor(){this.csrfToken="",this.apiVersion="2020-07",this.prefix="shopify_utils",this.sidebar=null,this.toggle=null,this.activeClass="is-active",this.duplicatePrefix=" Copy"}init(){this.getCSRFToken(),this.generateSidebar(),this.toggleSidebar(),this.clickEvent(),this.duplicateSubmit()}}Object.assign(z.prototype,{getCurrentPageType:o.a,toggleSidebar:a.a,styleTag:c.a,getCSRFToken:d.a,clickEvent:u.a,htmlSidebar:function(){return`\n  <div class="${this.prefix}-sidebar">\n    <span class="${this.prefix}-toggle js-${this.prefix}-toggle"></span>\n    <div class="${this.prefix}-sidebar__inner">\n      ${this.duplicateHTML()}\n      <ul>\n        <li>\n          <a href="#" class="js-${this.prefix}-action" data-type="duplicate">${h.duplicateIcon} Duplicate Selected</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  `},getSelectedInpus:g.a,getSelectedItems:x.a,generateSidebar:y.a}),Object.assign(z.prototype,{postRequest:_.a,getRequest:S.a,createMenu:k.a}),Object.assign(z.prototype,{duplicate:function(){const e=this.getCurrentPageType();this.appendHTML(e),this.sidebar.querySelector(`.${this.prefix}-duplicate-html`).classList.add(this.activeClass)},duplicate_collection:T.a,duplicate_product:O.a,duplicate_page:P.a,duplicate_order:C.a,duplicate_blog:R.a,duplicate_article:H.a,duplicate_navigation:G.a,appendHTML:function(e){const t=V.a.filter(t=>t.type.indexOf(e)>-1).pop().checkboxes,n=this.sidebar.querySelector(`.js-${this.prefix}-duplicate-checkboxes`);n.innerHTML="",t.forEach(e=>{const t=Object.entries(e)[0];n.insertAdjacentHTML("afterbegin",`<li><label><input type="checkbox" name="duplicate" value="${t[0]}" />${t[1]}</label></li>`)})},duplicateHTML:function(){return`\n    <div class="${this.prefix}-duplicate-html ${this.prefix}-sidepanel">\n      <span class="${this.prefix}-sidepanel__close"></span>\n      <form class="js-${this.prefix}-duplicate-form">\n        <ul class="js-${this.prefix}-duplicate-checkboxes"></ul>\n        <button type="submit" class="btn">Start</button>\n      </form>\n    </div>\n  `},duplicateSubmit:function(){const e=this,t=this.getCurrentPageType();this.sidebar.querySelector(`.js-${this.prefix}-duplicate-form`).addEventListener("submit",(async function(n){n.preventDefault();const i=await e.getSelectedItems();let o=[];this.querySelectorAll('input[name="duplicate"]:checked').forEach(e=>{o.push(e.value)});for(let n=0;n<i.length;n++){const s=i[n];let a=s.id+"/metafields.json";if(delete s.id,delete s.handle,delete s.admin_graphql_api_id,delete s.updated_at,"collection"===t||"collections"===t){if(o.indexOf("metafield")>-1){const t=await e.extractMetafields("collections/"+a);s.metafields=t}await e.duplicate_collection(s)}else if("product"===t||"products"===t){if(o.indexOf("metafield")>-1){const t=await e.extractMetafields("products/"+a);s.metafields=t}await e.duplicate_product(s)}else if("page"===t||"pages"===t){if(o.indexOf("metafield")>-1){const t=await e.extractMetafields("page/"+a);s.metafields=t}await e.duplicate_page(s)}else if("blog"===t||"blogs"===t){if(o.indexOf("metafield")>-1){const t=await e.extractMetafields("blogs/"+a);s.metafields=t}await e.duplicate_blog(s)}else if("article"===t||"articles"===t){if(o.indexOf("metafield")>-1){const t=await e.extractMetafields("articles/"+a);s.metafields=t}await e.duplicate_article(s)}}"navigation"===t&&await e.duplicate_navigation(),alert("Done!")}))},extractMetafields:async function(e){return(await this.getRequest(e,"GET")).metafields.map(e=>(delete e.id,delete e.owner_id,delete e.created_at,delete e.updated_at,delete e.owner_resource,delete e.admin_graphql_api_id,e))}});(new z).init()},function(e,t){e.exports=function(){const e=this.getCurrentPageType();let t=[];if("product"===e||"collection"===e||"page"===e||"order"===e||"blog"===e||"article"===e||"navigation"===e){const e=window.location.pathname.split("/").pop();t.push(e)}else"products"===e?document.querySelectorAll('input[type="checkbox"][id*=ResourceListItemCheckbox]:checked').forEach(e=>{const n=e.closest('[id*="gid://shopify/Product/"]').getAttribute("id").split("/").pop();t.push(n)}):"collections"===e?document.querySelectorAll('input[type="checkbox"][id*=collection_ids_]:checked').forEach(e=>{const n=e.getAttribute("id").split("collection_ids_").pop();t.push(n)}):"pages"===e?document.querySelector('[name="app-iframe"]').contentWindow.document.querySelectorAll('input[type="checkbox"][id*="ResourceListItemCheckbox"][aria-checked="true"]').forEach(e=>{const n=e.closest('[id*="gid://shopify/OnlineStorePage/"]').getAttribute("id").split("/").pop();t.push(n)}):"blogs"===e?document.querySelectorAll('.selected input[type="checkbox"]:checked').forEach(e=>{const n=e.getAttribute("id").split("blog_ids_").pop();t.push(n)}):"articles"===e&&document.querySelectorAll('.selected input[type="checkbox"]:checked').forEach(e=>{const n=e.value;t.push(n)});return t}},function(e,t){e.exports=async function(){const e=this.getCurrentPageType(),t=this.getSelectedInpus(),n=t.join(",");let i=[];if(t.length){if("product"===e||"products"===e)return i=await this.getRequest("products?ids="+n,"GET"),i.products;if("collection"===e||"collections"===e)return i=await this.getRequest("collections.json?ids="+n,"GET"),i.collections;if("page"===e||"pages"===e){i=await this.getRequest("pages.json?ids="+n,"GET");return i.pages.filter(e=>n.indexOf(e.id)>-1)}if("blog"===e||"blogs"===e){for(let e=0;e<t.length;e++){const n=t[e];item=await this.getRequest(`blogs/${n}.json`,"GET"),i.push(item.blog)}return i}if("article"===e||"articles"===e){for(let e=0;e<t.length;e++){const n=t[e];item=await this.getRequest(`articles/${n}.json`,"GET"),i.push(item.article)}return i}return[]}alert("No items selected!")}},function(e,t){e.exports=function(){document.querySelector("body").insertAdjacentHTML("afterbegin",this.htmlSidebar()),document.querySelector("body").insertAdjacentHTML("afterbegin",this.styleTag()),this.sidebar=document.querySelector(`.${this.prefix}-sidebar`),this.toggle=document.querySelector(`.js-${this.prefix}-toggle`)}},function(e,t){e.exports=function(e,t,n){return fetch(`/admin/api/${this.apiVersion}/${e}`,{method:t,headers:{accept:"application/json","content-type":"application/json","x-csrf-token":this.csrfToken},credentials:"include",body:JSON.stringify(n)}).then(e=>(console.log(e.headers.get("link")),e.json())).then(e=>e).catch(e=>e.json())}},function(e,t){e.exports=function(e,t){return fetch(`/admin/api/${this.apiVersion}/${e}`,{method:t,headers:{accept:"application/json","content-type":"application/json","x-csrf-token":this.csrfToken},credentials:"include"}).then(e=>(console.log(e.headers.get("link")),e.json())).then(e=>e).catch(e=>e.json())}},function(e,t){e.exports=function(e){const t=document.querySelector("#menu-item-name").value+this.duplicatePrefix,n=document.querySelector("#menu-handle").value;return fetch("/admin/menus/apply_changes.json",{method:"POST",headers:{"x-csrf-token":this.csrfToken,"Content-Type":"application/json"},body:JSON.stringify({changes:e,root:{title:t,handle:n}})})}},,function(e,t){e.exports=async function(e){delete e.products_count,e.title+=this.duplicatePrefix,"smart"===e.collection_type?await this.postRequest("smart_collections.json","POST",{smart_collection:e}):await this.postRequest("custom_collections.json","POST",{custom_collection:e})}},function(e,t){e.exports=async function(e){e.title+=this.duplicatePrefix;const t=await this.postRequest("products.json","POST",{product:e});t.errors&&alert(JSON.stringify(t.errors))}},function(e,t){e.exports=async function(e){e.title+=this.duplicatePrefix,await this.postRequest("pages.json","POST",{page:e})}},function(e,t){e.exports=async function(e){e.title+=this.duplicatePrefix,""===e.tags&&delete e.tags,delete e.source_name,delete e.fulfillments,delete e.tax_lines,e.customer&&delete e.customer.default_address,delete e.customer,await this.postRequest("orders.json","POST",{order:e})}},function(e,t){e.exports=async function(e){e.title+=this.duplicatePrefix,await this.postRequest("blogs.json","POST",{blog:e})}},function(e,t){e.exports=async function(e){e.title+=this.duplicatePrefix,await this.postRequest("articles.json","POST",{article:e})}},function(e,t){e.exports=function(){const e=[];document.querySelectorAll(".js-menu-resource").forEach(t=>{const n=JSON.parse(t.getAttribute("data-menu-item"));n.action="create",e.push(n)}),this.createMenu(e)}},,,function(e,t){e.exports=[{type:["product","products"],checkboxes:[{"variant-metafield":"Variant Metafields (a lot slower)"},{metafield:"Metafields (slow)"}]},{type:["collection","collections"],checkboxes:[{metafield:"Metafields"}]},{type:["article","articles"],checkboxes:[{metafield:"Metafields"}]},{type:["blog","blogs"],checkboxes:[{metafield:"Metafields"}]},{type:["page","pages"],checkboxes:[{metafield:"Metafields"}]}]}]);