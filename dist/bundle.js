!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=23)}([function(e,t){e.exports=function(){return window.location.pathname.match(/\/admin\/products\/\d+/)?"product":window.location.pathname.match(/\/admin\/products$/)?"products":window.location.pathname.match(/\/admin\/collections\/\d+/)?"collection":window.location.pathname.match(/\/admin\/collections$/)?"collections":window.location.pathname.match(/\/admin\/pages\/\d+/)?"page":window.location.pathname.match(/\/admin\/pages$/)?"pages":window.location.pathname.match(/\/admin\/orders\/\d+/)?"order":window.location.pathname.match(/\/admin\/orders$/)?"orders":window.location.pathname.match(/\/admin\/articles/)?"articles":window.location.pathname.match(/\/admin\/blogs\/\d+\/articles\/\d+$/)?"article":window.location.pathname.match(/\/admin\/blogs/)?"blogs":window.location.pathname.match(/\/admin\/blogs\/\d+$/)?"blog":window.location.pathname.match(/\/admin\/menus\/\d+$/)?"navigation":void 0}},function(e,t){e.exports=function(){this.toggle.addEventListener("click",()=>{this.sidebar.classList.toggle(this.activeClass),this.toggle.classList.toggle(this.activeClass),this.sidebar.querySelector(`.${this.prefix}-duplicate-html`).classList.remove(this.activeClass)}),document.addEventListener("keyup",e=>{"27"==e.keyCode&&(this.sidebar.classList.remove(this.activeClass),this.toggle.classList.remove(this.activeClass),this.sidebar.querySelector(`.${this.prefix}-duplicate-html`).classList.remove(this.activeClass))})}},function(e,t){e.exports=function(){let e=window.top.document.querySelector('meta[name="csrf-token"');e?this.csrfToken=e.getAttribute("content"):fetch(window.location.origin+"/admin/articles",{method:"GET",credentials:"include",headers:{accept:"text/html, application/xhtml+xml, application/xml","x-shopify-web":"1"}}).then(e=>{if(e.ok)return e.text();{const e=new Error("Error fetching CSRF token.");throw e.status="ERROR_FETCHING_CSRF_TOKEN",e}}).then(t=>{let i=window.top.document.createElement("div");if(i.innerHTML=t,e=i.querySelector('meta[name="csrf-token"]'),e){{this.csrfToken=e.getAttribute("content");const t=window.top.document.createElement("meta");t.setAttribute("name","csrf-token"),t.setAttribute("content",null),window.top.document.querySelector("head").appendChild(t)}i.remove(),i=null}})}},function(e,t){e.exports=function(){const e=this;this.sidebar.querySelector(".js-shopify_utils-action").addEventListener("click",(function(t){t.preventDefault();const i=this.getAttribute("data-type"),n=e.getCurrentPageType();-1!==["product","products","collection","collections","page","pages","article","articles","blog","blogs","navigation"].indexOf(n)?e[i]():alert("Not Supported for duplication")})),this.sidebar.querySelector(`.${this.prefix}-sidepanel__close`).addEventListener("click",e=>{this.sidebar.querySelectorAll(`.${this.prefix}-sidepanel`).forEach(e=>{e.classList.remove(this.activeClass)})})}},function(e,t){e.exports={duplicateIcon:'<svg viewBox="0 0 20 20" class="icon-duplicate" focusable="false" aria-hidden="true"><path d="M8 12h8V4H8v8zm4 4H4V8h2v5a1 1 0 0 0 1 1h5v2zm5-14H7a1 1 0 0 0-1 1v3H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3h3a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z" fill-rule="evenodd"></path></svg>'}},function(e,t){e.exports=function(){const e=this.getCurrentPageType();let t=[];if("product"===e||"collection"===e||"page"===e||"order"===e||"blog"===e||"article"===e||"navigation"===e){const e=window.location.pathname.split("/").pop();t.push(e)}else"products"===e?document.querySelectorAll('input[type="checkbox"][id*=ResourceListItemCheckbox]:checked').forEach(e=>{const i=e.closest('[id*="gid://shopify/Product/"]').getAttribute("id").split("/").pop();t.push(i)}):"collections"===e?document.querySelectorAll('input[type="checkbox"][id*=collection_ids_]:checked').forEach(e=>{const i=e.getAttribute("id").split("collection_ids_").pop();t.push(i)}):"pages"===e?document.querySelector('[name="app-iframe"]').contentWindow.document.querySelectorAll('input[type="checkbox"][id*="ResourceListItemCheckbox"][aria-checked="true"]').forEach(e=>{const i=e.closest('[id*="gid://shopify/OnlineStorePage/"]').getAttribute("id").split("/").pop();t.push(i)}):"blogs"===e?document.querySelectorAll('.selected input[type="checkbox"]:checked').forEach(e=>{const i=e.getAttribute("id").split("blog_ids_").pop();t.push(i)}):"articles"===e&&document.querySelectorAll('.selected input[type="checkbox"]:checked').forEach(e=>{const i=e.value;t.push(i)});return t}},function(e,t){e.exports=async function(){const e=this.getCurrentPageType(),t=this.getSelectedInpus(),i=t.join(",");let n=[];if(t.length){if("product"===e||"products"===e)return n=await this.getRequest("products?ids="+i,"GET"),n.products;if("collection"===e||"collections"===e)return n=await this.getRequest("collections.json?ids="+i,"GET"),n.collections;if("page"===e||"pages"===e){n=await this.getRequest("pages.json?ids="+i,"GET");return n.pages.filter(e=>i.indexOf(e.id)>-1)}if("blog"===e||"blogs"===e){for(let e=0;e<t.length;e++){const i=t[e];item=await this.getRequest(`blogs/${i}.json`,"GET"),n.push(item.blog)}return n}if("article"===e||"articles"===e){for(let e=0;e<t.length;e++){const i=t[e];item=await this.getRequest(`articles/${i}.json`,"GET"),n.push(item.article)}return n}return[]}alert("No items selected!")}},function(e,t){e.exports=function(){document.querySelector("body").insertAdjacentHTML("afterbegin",this.htmlSidebar()),this.sidebar=document.querySelector(`.${this.prefix}-sidebar`),this.toggle=document.querySelector(`.js-${this.prefix}-toggle`)}},function(e,t){e.exports=function(e,t,i){return fetch(`/admin/api/${this.apiVersion}/${e}`,{method:t,headers:{accept:"application/json","content-type":"application/json","x-csrf-token":this.csrfToken},credentials:"include",body:JSON.stringify(i)}).then(e=>e.json()).then(e=>e).catch(e=>e.json())}},function(e,t){e.exports=function(e,t){return fetch(`/admin/api/${this.apiVersion}/${e}`,{method:t,headers:{accept:"application/json","content-type":"application/json","x-csrf-token":this.csrfToken},credentials:"include"}).then(e=>e.json()).then(e=>e).catch(e=>e.json())}},function(e,t){e.exports=function(e){const t=document.querySelector("#menu-item-name").value+this.duplicatePrefix,i=document.querySelector("#menu-handle").value;return fetch("/admin/menus/apply_changes.json",{method:"POST",headers:{"x-csrf-token":this.csrfToken,"Content-Type":"application/json"},body:JSON.stringify({changes:e,root:{title:t,handle:i}})})}},function(e,t){e.exports=async function(e){delete e.products_count,e.title+=this.duplicatePrefix,"smart"===e.collection_type?await this.postRequest("smart_collections.json","POST",{smart_collection:e}):await this.postRequest("custom_collections.json","POST",{custom_collection:e})}},function(e,t){e.exports=async function(e){e.title+=this.duplicatePrefix;const t=await this.postRequest("products.json","POST",{product:e});t.errors&&alert(JSON.stringify(t.errors))}},function(e,t){e.exports=async function(e){e.title+=this.duplicatePrefix,await this.postRequest("pages.json","POST",{page:e})}},function(e,t){e.exports=async function(e){e.title+=this.duplicatePrefix,""===e.tags&&delete e.tags,delete e.source_name,delete e.fulfillments,delete e.tax_lines,e.customer&&delete e.customer.default_address,delete e.customer,await this.postRequest("orders.json","POST",{order:e})}},function(e,t){e.exports=async function(e){e.title+=this.duplicatePrefix,await this.postRequest("blogs.json","POST",{blog:e})}},function(e,t){e.exports=async function(e){e.title+=this.duplicatePrefix,await this.postRequest("articles.json","POST",{article:e})}},function(e,t){e.exports=function(){const e=[];document.querySelectorAll(".js-menu-resource").forEach(t=>{const i=JSON.parse(t.getAttribute("data-menu-item"));i.action="create",e.push(i)}),this.createMenu(e)}},function(e,t){e.exports=[{type:["product","products"],checkboxes:[{"variant-metafield":"Variant Metafields (a lot slower)"},{metafield:"Metafields (slow)"}]},{type:["collection","collections"],checkboxes:[{metafield:"Metafields"}]},{type:["article","articles"],checkboxes:[{metafield:"Metafields"}]},{type:["blog","blogs"],checkboxes:[{metafield:"Metafields"}]},{type:["page","pages"],checkboxes:[{metafield:"Metafields"}]}]},function(e,t,i){var n=i(20),o=i(21);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};n(o,a);e.exports=o.locals||{}},function(e,t,i){"use strict";var n,o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},a=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),s=[];function r(e){for(var t=-1,i=0;i<s.length;i++)if(s[i].identifier===e){t=i;break}return t}function c(e,t){for(var i={},n=[],o=0;o<e.length;o++){var a=e[o],c=t.base?a[0]+t.base:a[0],l=i[c]||0,d="".concat(c," ").concat(l);i[c]=l+1;var p=r(d),u={css:a[1],media:a[2],sourceMap:a[3]};-1!==p?(s[p].references++,s[p].updater(u)):s.push({identifier:d,updater:m(u,t),references:1}),n.push(d)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var s=a(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var d,p=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function u(e,t,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=p(t,o);else{var a=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function f(e,t,i){var n=i.css,o=i.media,a=i.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var h=null,g=0;function m(e,t){var i,n,o;if(t.singleton){var a=g++;i=h||(h=l(t)),n=u.bind(null,i,a,!1),o=u.bind(null,i,a,!0)}else i=l(t),n=f.bind(null,i,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var i=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var o=r(i[n]);s[o].references--}for(var a=c(e,t),l=0;l<i.length;l++){var d=r(i[l]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}i=a}}}},function(e,t,i){(t=i(22)(!1)).push([e.i,'.shopify_utils-sidepanel{position:absolute;top:0;right:100%;min-width:300px;padding:20px;height:auto;z-index:2;background-color:#fff;transition:transform .3s;overflow:hidden;display:flex;align-items:center;transform:translateY(-100%);box-shadow:-5px 2px 5px rgba(0,0,0,.1)}.shopify_utils-sidepanel.is-active{transform:translateY(0)}.shopify_utils-sidepanel form{flex:100%}.shopify_utils-sidepanel li{margin:0 0 5px}.shopify_utils-sidepanel li label{display:flex;align-items:center}.shopify_utils-sidepanel li input{margin:0 10px 0 0}.shopify_utils-sidepanel .btn{width:100%;padding:5px 0;background:linear-gradient(180deg, #3f4eae, #3f4eae);border-color:#38469b;box-shadow:inset 0 0 0 0 transparent,0 1px 0 0 rgba(22,29,37,.05),0 0 1px 0 #38469b;font-size:14px;color:#fff;line-height:1.6rem;text-transform:none;letter-spacing:normal;border-radius:5px;cursor:pointer}.shopify_utils-sidepanel .btn:hover{background:linear-gradient(180deg, #5c6ac4, #4959bd);text-decoration:none}.shopify_utils-sidepanel__close{position:absolute;top:10px;right:20px;width:20px;height:20px;cursor:pointer}.shopify_utils-sidepanel__close:before,.shopify_utils-sidepanel__close:after{content:"";position:absolute;top:0;left:50%;display:block;width:1px;height:20px;background:#000}.shopify_utils-sidepanel__close:before{transform:rotate(45deg)}.shopify_utils-sidepanel__close:after{transform:rotate(-45deg)}.shopify_utils-sidebar.is-active .shopify_utils-sidebar__inner{width:200px;padding:20px}.shopify_utils-sidebar{position:fixed;top:0;right:0;height:100vh;z-index:9999}.shopify_utils-sidebar.is-active .shopify_utils-sidebar__inner{width:200px;padding:20px}.shopify_utils-toggle{position:absolute;top:50%;right:100%;width:20px;height:20px;display:flex;justify-content:center;align-items:center;cursor:pointer}.shopify_utils-toggle:after{content:"";display:block;width:7px;height:7px;margin:0 auto;border-bottom:1px solid #000;border-left:1px solid #000;transform:rotate(45deg)}.shopify_utils-toggle.is-active:after{transform:rotate(-135deg)}.shopify_utils-sidebar__inner{overflow:hidden;background-color:#fff;width:0;height:100vh;transition:width .5s,padding .5s;box-shadow:-2px 0 5px rgba(0,0,0,.1)}.shopify_utils-sidebar__inner ul{list-style:none;padding:0;margin:0}.shopify_utils-sidebar__inner li{padding:0 0 5px;border-bottom:1px solid #dfe3e8}.shopify_utils-sidebar__inner ul a{display:flex;align-items:center;color:#454f5b;white-space:nowrap;text-decoration:none;opacity:.7}.shopify_utils-sidebar__inner ul a:hover{opacity:1}.shopify_utils-sidebar__inner ul svg{margin-right:4px}.shopify_utils-sidebar__inner .icon-duplicate{width:16px;height:16px}',""]),e.exports=t},function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var o=(s=n,r=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(c," */")),a=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[i].concat(a).concat([o]).join("\n")}var s,r,c;return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(o[s]=!0)}for(var r=0;r<e.length;r++){var c=[].concat(e[r]);n&&o[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),t.push(c))}},t}},function(e,t,i){"use strict";i.r(t);i(19);var n=i(0),o=i.n(n),a=i(1),s=i.n(a),r=i(2),c=i.n(r),l=i(3),d=i.n(l),p=i(4);var u=i(5),f=i.n(u),h=i(6),g=i.n(h),m=i(7),b=i.n(m),x=i(8),y=i.n(x),v=i(9),_=i.n(v),w=i(10),S=i.n(w);var j=i(11),k=i.n(j),T=i(12),q=i.n(T),O=i(13),$=i.n(O),C=i(14),M=i.n(C),E=i(15),R=i.n(E),P=i(16),L=i.n(P),A=i(17),H=i.n(A),N=i(18),I=i.n(N);class G{constructor(){this.csrfToken="",this.apiVersion="2020-07",this.prefix="shopify_utils",this.sidebar=null,this.toggle=null,this.activeClass="is-active",this.duplicatePrefix=" Copy"}init(){this.getCSRFToken(),this.generateSidebar(),this.toggleSidebar(),this.clickEvent(),this.duplicateSubmit()}}Object.assign(G.prototype,{getCurrentPageType:o.a,toggleSidebar:s.a,getCSRFToken:c.a,clickEvent:d.a,htmlSidebar:function(){return`\n  <div class="${this.prefix}-sidebar">\n    <span class="${this.prefix}-toggle js-${this.prefix}-toggle"></span>\n    <div class="${this.prefix}-sidebar__inner">\n      ${this.duplicateHTML()}\n      <ul>\n        <li>\n          <a href="#" class="js-${this.prefix}-action" data-type="duplicate">${p.duplicateIcon} Duplicate Selected</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  `},getSelectedInpus:f.a,getSelectedItems:g.a,generateSidebar:b.a}),Object.assign(G.prototype,{postRequest:y.a,getRequest:_.a,createMenu:S.a}),Object.assign(G.prototype,{duplicate:function(){const e=this.getCurrentPageType();this.appendHTML(e),this.sidebar.querySelector(`.${this.prefix}-duplicate-html`).classList.add(this.activeClass)},duplicate_collection:k.a,duplicate_product:q.a,duplicate_page:$.a,duplicate_order:M.a,duplicate_blog:R.a,duplicate_article:L.a,duplicate_navigation:H.a,appendHTML:function(e){const t=I.a.filter(t=>t.type.indexOf(e)>-1).pop().checkboxes,i=this.sidebar.querySelector(`.js-${this.prefix}-duplicate-checkboxes`);i.innerHTML="",t.forEach(e=>{const t=Object.entries(e)[0];i.insertAdjacentHTML("afterbegin",`<li><label><input type="checkbox" name="duplicate" value="${t[0]}" />${t[1]}</label></li>`)})},duplicateHTML:function(){return`\n    <div class="${this.prefix}-duplicate-html ${this.prefix}-sidepanel">\n      <span class="${this.prefix}-sidepanel__close"></span>\n      <form class="js-${this.prefix}-duplicate-form">\n        <ul class="js-${this.prefix}-duplicate-checkboxes"></ul>\n        <button type="submit" class="btn">Start</button>\n      </form>\n    </div>\n  `},duplicateSubmit:function(){const e=this,t=this.getCurrentPageType();this.sidebar.querySelector(`.js-${this.prefix}-duplicate-form`).addEventListener("submit",(async function(i){i.preventDefault();const n=await e.getSelectedItems();let o=[];this.querySelectorAll('input[name="duplicate"]:checked').forEach(e=>{o.push(e.value)});for(let i=0;i<n.length;i++){const a=n[i],s=a.id,r=a.id+"/metafields.json";if(delete a.id,delete a.handle,delete a.admin_graphql_api_id,delete a.updated_at,"collection"===t||"collections"===t){if(o.indexOf("metafield")>-1){const t=await e.extractMetafields("collections/"+r);a.metafields=t}await e.duplicate_collection(a)}else if("product"===t||"products"===t){if(o.indexOf("metafield")>-1){const t=await e.extractMetafields("products/"+r);a.metafields=t}if(o.indexOf("variant-metafield")>-1)for(let t=0;t<a.variants.length;t++){const i=a.variants[t],n=await e.extractMetafields(`products/${s}/variants/${i.id}/metafields.json`);i.metafields=n,console.log(n,i)}await e.duplicate_product(a)}else if("page"===t||"pages"===t){if(o.indexOf("metafield")>-1){const t=await e.extractMetafields("page/"+r);a.metafields=t}await e.duplicate_page(a)}else if("blog"===t||"blogs"===t){if(o.indexOf("metafield")>-1){const t=await e.extractMetafields("blogs/"+r);a.metafields=t}await e.duplicate_blog(a)}else if("article"===t||"articles"===t){if(o.indexOf("metafield")>-1){const t=await e.extractMetafields("articles/"+r);a.metafields=t}await e.duplicate_article(a)}}"navigation"===t&&await e.duplicate_navigation(),alert("Done!")}))},extractMetafields:async function(e){return(await this.getRequest(e,"GET")).metafields.map(e=>(delete e.id,delete e.owner_id,delete e.created_at,delete e.updated_at,delete e.owner_resource,delete e.admin_graphql_api_id,e))}});(new G).init()}]);