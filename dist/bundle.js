!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([function(t,e){t.exports=function(){return window.location.pathname.match(/\/admin\/products\/\d+/)?"product":window.location.pathname.match(/\/admin\/products$/)?"products":window.location.pathname.match(/\/admin\/collections\/\d+/)?"collection":window.location.pathname.match(/\/admin\/collections$/)?"collections":window.location.pathname.match(/\/admin\/pages\/\d+/)?"page":window.location.pathname.match(/\/admin\/pages$/)?"pages":window.location.pathname.match(/\/admin\/orders\/\d+/)?"order":window.location.pathname.match(/\/admin\/orders$/)?"orders":window.location.pathname.match(/\/admin\/articles/)?"articles":window.location.pathname.match(/\/admin\/blogs\/\d+\/articles\/\d+$/)?"article":window.location.pathname.match(/\/admin\/blogs/)?"blogs":window.location.pathname.match(/\/admin\/blogs\/\d+$/)?"blog":void 0}},function(t,e){t.exports=function(){this.toggle.addEventListener("click",()=>{this.sidebar.classList.toggle(this.activeClass),this.toggle.classList.toggle(this.activeClass)}),document.addEventListener("keyup",t=>{"27"==t.keyCode&&(this.sidebar.classList.remove(this.activeClass),this.toggle.classList.remove(this.activeClass))})}},function(t,e){t.exports=function(){return`\n  <style>\n    .${this.prefix}-sidebar {\n      position: fixed;\n      top: 0;\n      right: 0;\n      height: 100vh;\n      z-index: 9999;\n    }\n    \n    .${this.prefix}-toggle {\n      position: absolute;\n      top: 50%;\n      right: 100%;\n      width: 20px;\n      height: 20px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      cursor: pointer;\n    }\n    \n    .${this.prefix}-toggle:after {\n      content: '';\n      display: block;\n      width: 7px;\n      height: 7px;\n      margin: 0 auto;\n      border-bottom: 1px solid #000;\n      border-left: 1px solid #000;\n      transform: rotate(45deg);\n    }\n    \n    .${this.prefix}-toggle.is-active:after {\n      transform: rotate(-135deg);\n    }\n    \n    .${this.prefix}-sidebar__inner {\n      overflow: hidden;\n      background-color: #fff;\n      width: 0;\n      height: 100vh;\n      transition: width 0.5s, padding 0.5s;\n      box-shadow: -2px 0 5px rgba(0,0,0,.1);\n    }\n    \n    .${this.prefix}-sidebar__inner ul {\n      list-style: none;\n      padding: 0;\n      margin: 0;\n    }\n    \n    .${this.prefix}-sidebar__inner li {\n      padding: 0 0 5px;\n      border-bottom: 1px solid #dfe3e8;\n    }\n    \n    .${this.prefix}-sidebar__inner ul a {\n      display: flex;\n      align-items: center;\n      color: #454f5b;\n      white-space: nowrap;\n      text-decoration: none;\n      opacity: 0.7;\n    }\n    \n    .${this.prefix}-sidebar__inner ul a:hover {\n      opacity: 1;\n    } \n    \n    .${this.prefix}-sidebar__inner ul svg {\n      margin-right: 4px;\n    }\n    \n    .${this.prefix}-sidebar__inner ul .icon-duplicate {\n      width: 16px;\n      height: 16px;\n    }\n    \n    .${this.prefix}-sidebar.is-active .${this.prefix}-sidebar__inner {\n      width: 200px;\n      padding: 20px;\n    }\n  </style>\n  `}},function(t,e){t.exports=function(){let t=window.top.document.querySelector('meta[name="csrf-token"');t?this.csrfToken=t.getAttribute("content"):fetch(window.location.origin+"/admin/articles",{method:"GET",credentials:"include",headers:{accept:"text/html, application/xhtml+xml, application/xml","x-shopify-web":"1"}}).then(t=>{if(t.ok)return t.text();{const t=new Error("Error fetching CSRF token.");throw t.status="ERROR_FETCHING_CSRF_TOKEN",t}}).then(e=>{let n=window.top.document.createElement("div");if(n.innerHTML=e,t=n.querySelector('meta[name="csrf-token"]'),t){{this.csrfToken=t.getAttribute("content");const e=window.top.document.createElement("meta");e.setAttribute("name","csrf-token"),e.setAttribute("content",null),window.top.document.querySelector("head").appendChild(e)}n.remove(),n=null}})}},function(t,e){t.exports=function(){const t=this;document.querySelector(".js-shopify_utils-action").addEventListener("click",(function(e){e.preventDefault();const n=this.getAttribute("data-type"),i=t.getCurrentPageType();-1!==["product","products","collection","collections","page","pages","article","articles","blog","blogs"].indexOf(i)?t[n]():alert("Not Supported for duplication")}))}},function(t,e){t.exports={duplicateIcon:'<svg viewBox="0 0 20 20" class="icon-duplicate" focusable="false" aria-hidden="true"><path d="M8 12h8V4H8v8zm4 4H4V8h2v5a1 1 0 0 0 1 1h5v2zm5-14H7a1 1 0 0 0-1 1v3H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3h3a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z" fill-rule="evenodd"></path></svg>'}},function(t,e){t.exports=function(){const t=this.getCurrentPageType();let e=[];if("product"===t||"collection"===t||"page"===t||"order"===t||"blog"===t||"article"===t){const t=window.location.pathname.split("/").pop();e.push(t)}else"products"===t?document.querySelectorAll('input[type="checkbox"][id*=ResourceListItemCheckbox]:checked').forEach(t=>{const n=t.closest('[id*="gid://shopify/Product/"]').getAttribute("id").split("/").pop();e.push(n)}):"collections"===t?document.querySelectorAll('input[type="checkbox"][id*=collection_ids_]:checked').forEach(t=>{const n=t.getAttribute("id").split("collection_ids_").pop();e.push(n)}):"pages"===t?document.querySelector('[name="app-iframe"]').contentWindow.document.querySelectorAll('input[type="checkbox"][id*="ResourceListItemCheckbox"][aria-checked="true"]').forEach(t=>{const n=t.closest('[id*="gid://shopify/OnlineStorePage/"]').getAttribute("id").split("/").pop();e.push(n)}):"blogs"===t?document.querySelectorAll('.selected input[type="checkbox"]:checked').forEach(t=>{const n=t.getAttribute("id").split("blog_ids_").pop();e.push(n)}):"articles"===t&&document.querySelectorAll('.selected input[type="checkbox"]:checked').forEach(t=>{const n=t.value;e.push(n)});return e}},function(t,e){t.exports=async function(){const t=this.getCurrentPageType(),e=this.getSelectedInpus(),n=e.join(",");let i=[];if(e.length){if("product"===t||"products"===t)return i=await this.getRequest("products?ids="+n,"GET"),i.products;if("collection"===t||"collections"===t)return i=await this.getRequest("collections.json?ids="+n,"GET"),i.collections;if("page"===t||"pages"===t){i=await this.getRequest("pages.json?ids="+n,"GET");return i.pages.filter(t=>n.indexOf(t.id)>-1)}if("blog"===t||"blogs"===t){for(let t=0;t<e.length;t++){const n=e[t];item=await this.getRequest(`blogs/${n}.json`,"GET"),i.push(item.blog)}return i}if("article"===t||"articles"===t){for(let t=0;t<e.length;t++){const n=e[t];item=await this.getRequest(`articles/${n}.json`,"GET"),i.push(item.article)}return i}}else alert("No items selected!")}},function(t,e){t.exports=function(){document.querySelector("body").insertAdjacentHTML("afterbegin",this.htmlSidebar()),document.querySelector("body").insertAdjacentHTML("afterbegin",this.styleTag()),this.sidebar=document.querySelector(`.${this.prefix}-sidebar`),this.toggle=document.querySelector(`.js-${this.prefix}-toggle`)}},function(t,e){t.exports=function(t,e,n){return fetch(`/admin/api/${this.apiVersion}/${t}`,{method:e,headers:{accept:"application/json","content-type":"application/json","x-csrf-token":this.csrfToken},credentials:"include",body:JSON.stringify(n)}).then(t=>(console.log(t.headers.get("link")),t.json())).then(t=>t).catch(t=>t.json())}},function(t,e){t.exports=function(t,e){return fetch(`/admin/api/${this.apiVersion}/${t}`,{method:e,headers:{accept:"application/json","content-type":"application/json","x-csrf-token":this.csrfToken},credentials:"include"}).then(t=>(console.log(t.headers.get("link")),t.json())).then(t=>t).catch(t=>t.json())}},function(t,e){t.exports=async function(){const t=this.getCurrentPageType(),e=await this.getSelectedItems();for(let n=0;n<e.length;n++){const i=e[n];delete i.id,delete i.handle,delete i.admin_graphql_api_id,delete i.updated_at,"collection"===t||"collections"===t?await this.duplicate_collection(i):"product"===t||"products"===t?await this.duplicate_product(i):"page"===t||"pages"===t?await this.duplicate_page(i):"blog"===t||"blogs"===t?await this.duplicate_blog(i):"article"!==t&&"articles"!==t||await this.duplicate_article(i)}}},function(t,e){t.exports=async function(t){delete t.products_count,t.title+=this.duplicatePrefix,"smart"===t.collection_type?await this.postRequest("smart_collections.json","POST",{smart_collection:t}):await this.postRequest("custom_collections.json","POST",{custom_collection:t})}},function(t,e){t.exports=async function(t){t.title+=this.duplicatePrefix;const e=await this.postRequest("products.json","POST",{product:t});e.errors&&alert(JSON.stringify(e.errors))}},function(t,e){t.exports=async function(t){t.title+=this.duplicatePrefix,await this.postRequest("pages.json","POST",{page:t})}},function(t,e){t.exports=async function(t){t.title+=this.duplicatePrefix,""===t.tags&&delete t.tags,delete t.source_name,delete t.fulfillments,delete t.tax_lines,t.customer&&delete t.customer.default_address,delete t.customer,await this.postRequest("orders.json","POST",{order:t})}},function(t,e){t.exports=async function(t){t.title+=this.duplicatePrefix,await this.postRequest("blogs.json","POST",{blog:t})}},function(t,e){t.exports=async function(t){t.title+=this.duplicatePrefix,await this.postRequest("articles.json","POST",{article:t})}},function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),s=n(1),a=n.n(s),c=n(2),r=n.n(c),l=n(3),d=n.n(l),p=n(4),u=n.n(p),h=n(5);var f=n(6),g=n.n(f),m=n(7),b=n.n(m),x=n(8),y=n.n(x),w=n(9),_=n.n(w),v=n(10),S=n.n(v),k=n(11),j=n.n(k),T=n(12),$=n.n(T),q=n(13),P=n.n(q),E=n(14),R=n.n(E),O=n(15),C=n.n(O),A=n(16),L=n.n(A),I=n(17),H=n.n(I);class M{constructor(){this.csrfToken="",this.apiVersion="2020-07",this.prefix="shopify_utils",this.sidebar=null,this.toggle=null,this.activeClass="is-active",this.duplicatePrefix=" Copy"}init(){this.getCSRFToken(),this.generateSidebar(),this.toggleSidebar(),this.clickEvent()}}Object.assign(M.prototype,{getCurrentPageType:o.a,toggleSidebar:a.a,styleTag:r.a,getCSRFToken:d.a,clickEvent:u.a,htmlSidebar:function(){return`\n  <div class="${this.prefix}-sidebar">\n    <span class="${this.prefix}-toggle js-${this.prefix}-toggle"></span>\n    <div class="${this.prefix}-sidebar__inner">\n      <ul>\n        <li>\n          <a href="#" class="js-${this.prefix}-action" data-type="duplicate">${h.duplicateIcon} Duplicate Selected</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  `},getSelectedInpus:g.a,getSelectedItems:b.a,generateSidebar:y.a,postRequest:_.a,getRequest:S.a,duplicate:j.a,duplicate_collection:$.a,duplicate_product:P.a,duplicate_page:R.a,duplicate_order:C.a,duplicate_blog:L.a,duplicate_article:H.a});(new M).init()}]);